<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>05_components_composing</title>
</head>
<body>

<div id="example"></div>

<script type="text/javascript" src="../js/react.development.js"></script>
<script type="text/javascript" src="../js/react-dom.development.js"></script>
<script type="text/javascript" src="../js/prop-types.js"></script>
<script type="text/javascript" src="../js/babel.min.js"></script>
<script type="text/babel">

    class App extends React.Component {
        //初始化todos状态
        state = {
            todos:[
                'a',
                'b',
                'c'
            ]
        }

        render(){
            //读取状态信息
            const {todos} = this.state
            return(
                <div>
                    <h1>TODOLIST</h1>
                    <Add size={todos.length}/>
                    <List todos ={todos}/>
                </div>
            )
        }
    }
    class Add extends React.Component {
        static propTypes ={
            size: PropTypes.number.isRequired
        }

        render(){
            //读取数据
            const {size} = this.props
            return(
                <div>
                    <input type="text"/>
                    <button>add #{size}</button>
                </div>
            )
        }
    }
    class List extends React.Component {
        //声明需要的标签属性类型
        static propTypes = {
            todos: PropTypes.array.isRequired
        }

        render(){
            //读取外部数据
            const {todos} = this.props
            return(
                <ul>
                    {
                        todos.map((todo,index) =><li key={index}>{todo}</li>)
                    }
                </ul>
            )
        }
    }
    ReactDOM.render(<App/>,document.getElementById('example'))










    /*class App extends React.Component {

      //初始化状态数据
      state ={
          todos:[
              'a',
              'bbb',
              'cccccccccc',
              'cccccccccc',
              'cccccccccc'

          ]
      }


      //向todos中添加todo********************************

      //更新状态数据的行为(函数/方法)在哪个组件?

      //状态数据在哪个组件, 就定义在哪个组件
      addTodo = (todo) =>{
          //得到状态数据todos
          const {todos} = this.state
          //更新状态数据
          todos.unshift(todo)
          //更新状态
          this.setState({
              todos
          })

      }


      render(){
          //读取内部状态数据
          const {todos} = this.state
          return(
              <div>
                  <h1>TODOLIST</h1>
                  <Add size={todos.length} addTodo = {this.addTodo}/>
                  <List todos={todos}/>
              </div>
          )
      }
  }
  class Add extends React.Component {

      //声明需要接受什么类型的标签属性
      static propTypes ={
          size: PropTypes.number.isRequired,
          addTodo:PropTypes.func.isRequired
      }

      addTodo = () =>{
          const {todos} = this.props
          //1.获取输入框的todo
          const todo = this.refs.todo.value
          //2.将todo添加到todos中
          this.props.addTodo(todo)
          //3.清除输入框
          this.refs.todo.value = ''

      }

      render(){
          //读取数据
          const {size} = this.props
          return(
              <div>
                  <input type="text" ref="todo"/>
                  <button onClick={this.addTodo}>Add #{size}</button>
              </div>
          )
      }
  }
  class List extends React.Component {

      //声明接受什么样的标签属性
      static propTypes ={
          todos: PropTypes.array.isRequired
      }

      render(){
          //读取外部传入的属性数据
          const {todos} = this.props
          return(
              <ul>
                  {
                      todos.map((todo,index) => <li key={index}>{todo}</li>)
                  }
              </ul>
          )
      }
  }

  ReactDOM.render(<App/>,document.getElementById('example'))

  */




















  /*  class App extends React.Component {

        //初始化状态
        state ={
            todos:[
                'a',
                'bbbbbbbb',
                'ccc'
            ]
        }

        render(){
            //读取状态信息
            const {todos} = this.state
            return(
                <div>
                    <h1>TODOLIST</h1>
                    <Add/>
                    <List todos={todos}/>
                </div>
            )
        }
    }
    class Add extends React.Component {

        render(){
            return(
                <div>
                    <input type="text"/>
                    <button>Add #3</button>
                </div>
            )
        }
    }
    class List extends React.Component {
        //声明接受什么类型的标签属性
        static propTypes ={
            todos: PropTypes.array.isRequired
        }

        render(){
            //读取数据
            const {todos} = this.props
            return(
                <ul>
                    {
                        todos.map((todo,index) => <li>{todo}</li>)
                    }
                </ul>
            )
        }
    }
    ReactDOM.render(<App/>,document.getElementById('example'))

    */












   /* class App extends React.Component {
        //初始化状态
        state ={
            todos:[
                'a',
                'b',
                'c'
            ]
        }

        render() {
            //读取内部的状态数据
            const {todos} = this.state
            return (
                <div>
                    <h1>TODOLIST</h1>
                    <Add/>
                    <List todos={todos}/>
                </div>
            )
        }
    }

    class Add extends React.Component {

        render() {
            return (
                <div>
                    <input type="text"/>
                    <button>Add #3</button>
                </div>
            )
        }
    }

    class List extends React.Component {

        //声明接受哪些标签属性
        static propTypes ={
            todos: PropTypes.array.isRequired
        }

        render() {
            //读取外部传入的属性数据
            const {todos} =this.props
            return (
                <ul>
                    {todos.map((todo,index) => <li key={index}>{todo}</li>)}
                </ul>
            )
        }
    }

    ReactDOM.render(<App/>,document.getElementById('example'))

    */

</script>
</body>
</html>
